<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start Guide • openstockflow</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Atkinson_Hyperlegible-0.4.10/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quick Start Guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">openstockflow</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ianmoran11/openstockflow" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start Guide</h1>
                        <h4 data-toc-skip class="author">Ian Moran</h4>
            
            <h4 data-toc-skip class="date">2025-12-27</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ianmoran11/openstockflow/blob/main/vignettes/quickstart.Rmd" class="external-link"><code>vignettes/quickstart.Rmd</code></a></small>
      <div class="d-none name"><code>quickstart.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-is-openstockflow">What is openstockflow?<a class="anchor" aria-label="anchor" href="#what-is-openstockflow"></a>
</h2>
<p><strong>openstockflow</strong> lets you build mathematical models
using stock-flow diagrams—a visual way to represent systems with
accumulations (stocks) and rates of change (flows).</p>
<p>Think of it like plumbing: - <strong>Stocks</strong> are tanks that
hold quantities - <strong>Flows</strong> are pipes that move quantities
between tanks - The package automatically generates differential
equations and solves them</p>
</div>
<div class="section level2">
<h2 id="minute-tutorial">5-Minute Tutorial<a class="anchor" aria-label="anchor" href="#minute-tutorial"></a>
</h2>
<div class="section level3">
<h3 id="step-1-create-a-simple-model">Step 1: Create a Simple Model<a class="anchor" aria-label="anchor" href="#step-1-create-a-simple-model"></a>
</h3>
<p>Let’s model exponential decay: a quantity that decreases over
time.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">decay_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock_flow_diagram.html">stock_flow_diagram</a></span><span class="op">(</span>reset_ids <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"X"</span>, initial <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"decay"</span>,</span>
<span>    from <span class="op">=</span> <span class="st">"X"</span>,</span>
<span>    to <span class="op">=</span> <span class="cn">NULL</span>,  <span class="co"># NULL means "out of the system"</span></span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">k</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">X</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># View the structure</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">decay_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; StockFlowDiagram</span></span>
<span><span class="co">#&gt;   Stocks: 1 </span></span>
<span><span class="co">#&gt;   Flows: 1 </span></span>
<span><span class="co">#&gt;   Links: 1 </span></span>
<span><span class="co">#&gt;   Variables: 0 </span></span>
<span><span class="co">#&gt;   Sum variables: 0</span></span></code></pre></div>
<p>This creates the equation:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>X</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mo>−</mo><mi>k</mi><mo>⋅</mo><mi>X</mi></mrow><annotation encoding="application/x-tex">\frac{dX}{dt} = -k \cdot X</annotation></semantics></math></p>
</div>
<div class="section level3">
<h3 id="step-2-solve-it">Step 2: Solve It<a class="anchor" aria-label="anchor" href="#step-2-solve-it"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"deSolve"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_diagram.html">solve_diagram</a></span><span class="op">(</span></span>
<span>    <span class="va">decay_model</span>,</span>
<span>    times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>k <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># View first few rows</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Stock-Flow ODE Solution</span></span>
<span><span class="co">#&gt;   Time points: 10 </span></span>
<span><span class="co">#&gt;   Time range: [ 0 , 4.5 ]</span></span>
<span><span class="co">#&gt;   Stocks: X </span></span>
<span><span class="co">#&gt;   Parameters:</span></span>
<span><span class="co">#&gt;      k = 0.2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    time         X</span></span>
<span><span class="co">#&gt; 1   0.0 100.00000</span></span>
<span><span class="co">#&gt; 2   0.5  90.48383</span></span>
<span><span class="co">#&gt; 3   1.0  81.87316</span></span>
<span><span class="co">#&gt; 4   1.5  74.08192</span></span>
<span><span class="co">#&gt; 5   2.0  67.03206</span></span>
<span><span class="co">#&gt; 6   2.5  60.65310</span></span>
<span><span class="co">#&gt; 7   3.0  54.88119</span></span>
<span><span class="co">#&gt; 8   3.5  49.65855</span></span>
<span><span class="co">#&gt; 9   4.0  44.93292</span></span>
<span><span class="co">#&gt; 10  4.5  40.65699</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="step-3-visualize-it">Step 3: Visualize It<a class="anchor" aria-label="anchor" href="#step-3-visualize-it"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"deSolve"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/plot_solution.html">plot_solution</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Please use `linewidth` instead.</span></span>
<span><span class="co">#&gt; <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">generated.</span></span></span></code></pre></div>
<p><img src="quickstart_files/figure-html/decay_plot-1.png" class="r-plt" alt="" width="672"></p>
<p>The analytical solution is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><msub><mi>X</mi><mn>0</mn></msub><msup><mi>e</mi><mrow><mo>−</mo><mi>k</mi><mi>t</mi></mrow></msup><mo>=</mo><mn>100</mn><msup><mi>e</mi><mrow><mo>−</mo><mn>0.2</mn><mi>t</mi></mrow></msup></mrow><annotation encoding="application/x-tex">X(t) = X_0 e^{-kt} = 100 e^{-0.2t}</annotation></semantics></math></p>
</div>
</div>
<div class="section level2">
<h2 id="example-population-growth-with-carrying-capacity">Example: Population Growth with Carrying Capacity<a class="anchor" aria-label="anchor" href="#example-population-growth-with-carrying-capacity"></a>
</h2>
<p>Now something more interesting: logistic growth where a population
grows but slows as it approaches a maximum capacity.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logistic</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock_flow_diagram.html">stock_flow_diagram</a></span><span class="op">(</span>reset_ids <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"Population"</span>, initial <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"births"</span>,</span>
<span>    from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    to <span class="op">=</span> <span class="st">"Population"</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="co"># Growth slows as population approaches carrying capacity</span></span>
<span>      <span class="va">growth_rate</span> <span class="op">&lt;-</span> <span class="va">params</span><span class="op">$</span><span class="va">r</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Population</span> <span class="op">/</span> <span class="va">params</span><span class="op">$</span><span class="va">K</span><span class="op">)</span></span>
<span>      <span class="va">growth_rate</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Population</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">logistic</span><span class="op">)</span></span>
<span><span class="co">#&gt; StockFlowDiagram</span></span>
<span><span class="co">#&gt;   Stocks: 1 </span></span>
<span><span class="co">#&gt;   Flows: 1 </span></span>
<span><span class="co">#&gt;   Links: 1 </span></span>
<span><span class="co">#&gt;   Variables: 0 </span></span>
<span><span class="co">#&gt;   Sum variables: 0</span></span></code></pre></div>
<p>This implements:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>P</mi></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mi>r</mi><mo>⋅</mo><mi>P</mi><mo>⋅</mo><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mfrac><mi>P</mi><mi>K</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\frac{dP}{dt} = r \cdot P \cdot (1 - \frac{P}{K})</annotation></semantics></math></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"deSolve"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">logistic_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_diagram.html">solve_diagram</a></span><span class="op">(</span></span>
<span>    <span class="va">logistic</span>,</span>
<span>    times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">50</span>, by <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">0.5</span>, K <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Plot growth curve</span></span>
<span>  <span class="fu"><a href="../reference/plot_solution.html">plot_solution</a></span><span class="op">(</span><span class="va">logistic_result</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Check that it approaches carrying capacity</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Final population:"</span>, <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">logistic_result</span><span class="op">$</span><span class="va">Population</span>, <span class="fl">1</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Carrying capacity:"</span>, <span class="fl">1000</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Final population: 1000 </span></span>
<span><span class="co">#&gt; Carrying capacity: 1000</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example-two-stock-system">Example: Two-Stock System<a class="anchor" aria-label="anchor" href="#example-two-stock-system"></a>
</h2>
<p>A predator-prey model (simplified Lotka-Volterra):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">predator_prey</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock_flow_diagram.html">stock_flow_diagram</a></span><span class="op">(</span>reset_ids <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"Prey"</span>, initial <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"Predator"</span>, initial <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"prey_growth"</span>,</span>
<span>    from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    to <span class="op">=</span> <span class="st">"Prey"</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">alpha</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Prey</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"predation"</span>,</span>
<span>    from <span class="op">=</span> <span class="st">"Prey"</span>,</span>
<span>    to <span class="op">=</span> <span class="st">"Predator"</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">beta</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Prey</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Predator</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"predator_death"</span>,</span>
<span>    from <span class="op">=</span> <span class="st">"Predator"</span>,</span>
<span>    to <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">delta</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Predator</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">predator_prey</span><span class="op">)</span></span>
<span><span class="co">#&gt; StockFlowDiagram</span></span>
<span><span class="co">#&gt;   Stocks: 2 </span></span>
<span><span class="co">#&gt;   Flows: 3 </span></span>
<span><span class="co">#&gt;   Links: 4 </span></span>
<span><span class="co">#&gt;   Variables: 0 </span></span>
<span><span class="co">#&gt;   Sum variables: 0</span></span></code></pre></div>
<p>Equations: -
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">Prey</mtext><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mi>α</mi><mo>⋅</mo><mtext mathvariant="normal">Prey</mtext><mo>−</mo><mi>β</mi><mo>⋅</mo><mtext mathvariant="normal">Prey</mtext><mo>⋅</mo><mtext mathvariant="normal">Predator</mtext></mrow><annotation encoding="application/x-tex">\frac{d(\text{Prey})}{dt} = \alpha \cdot \text{Prey} - \beta \cdot \text{Prey} \cdot \text{Predator}</annotation></semantics></math>
-
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><mrow><mo stretchy="true" form="prefix">(</mo><mtext mathvariant="normal">Predator</mtext><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mi>d</mi><mi>t</mi></mrow></mfrac><mo>=</mo><mi>β</mi><mo>⋅</mo><mtext mathvariant="normal">Prey</mtext><mo>⋅</mo><mtext mathvariant="normal">Predator</mtext><mo>−</mo><mi>δ</mi><mo>⋅</mo><mtext mathvariant="normal">Predator</mtext></mrow><annotation encoding="application/x-tex">\frac{d(\text{Predator})}{dt} = \beta \cdot \text{Prey} \cdot \text{Predator} - \delta \cdot \text{Predator}</annotation></semantics></math></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"deSolve"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">pp_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_diagram.html">solve_diagram</a></span><span class="op">(</span></span>
<span>    <span class="va">predator_prey</span>,</span>
<span>    times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span>    params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span>, beta <span class="op">=</span> <span class="fl">0.002</span>, delta <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Plot both populations</span></span>
<span>  <span class="fu"><a href="../reference/plot_solution.html">plot_solution</a></span><span class="op">(</span><span class="va">pp_result</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Phase plot shows cyclic dynamics</span></span>
<span>  <span class="fu"><a href="../reference/phase_plot.html">phase_plot</a></span><span class="op">(</span><span class="va">pp_result</span>, <span class="st">"Prey"</span>, <span class="st">"Predator"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="quickstart_files/figure-html/predator_prey_solve-1.png" class="r-plt" alt="" width="672"></p>
</div>
<div class="section level2">
<h2 id="alternative-syntax-algebraic-api">Alternative Syntax: Algebraic API<a class="anchor" aria-label="anchor" href="#alternative-syntax-algebraic-api"></a>
</h2>
<p>For those who prefer mathematical notation, there’s an algebraic
API:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define components</span></span>
<span><span class="va">S</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock.html">stock</a></span><span class="op">(</span><span class="st">"S"</span>, initial <span class="op">=</span> <span class="fl">999</span><span class="op">)</span></span>
<span><span class="va">I</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock.html">stock</a></span><span class="op">(</span><span class="st">"I"</span>, initial <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">R</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/stock.html">stock</a></span><span class="op">(</span><span class="st">"R"</span>, initial <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="va">infection</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flow.html">flow</a></span><span class="op">(</span><span class="st">"infection"</span>,</span>
<span>  rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">params</span><span class="op">$</span><span class="va">beta</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">S</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">I</span> <span class="op">/</span> <span class="fl">1000</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">recovery</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/flow.html">flow</a></span><span class="op">(</span><span class="st">"recovery"</span>,</span>
<span>  rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">params</span><span class="op">$</span><span class="va">gamma</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">I</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compose with operators: %-&gt;% connects, %+% combines</span></span>
<span><span class="va">sir</span> <span class="op">&lt;-</span> <span class="va">S</span> <span class="op"><a href="../reference/grapes-plus-grapes.html">%+%</a></span> <span class="va">I</span> <span class="op"><a href="../reference/grapes-plus-grapes.html">%+%</a></span> <span class="va">R</span> <span class="op"><a href="../reference/grapes-plus-grapes.html">%+%</a></span></span>
<span>  <span class="op">(</span><span class="va">S</span> <span class="op"><a href="../reference/grapes-greater-than-grapes.html">%-&gt;%</a></span> <span class="va">infection</span> <span class="op"><a href="../reference/grapes-greater-than-grapes.html">%-&gt;%</a></span> <span class="va">I</span><span class="op">)</span> <span class="op"><a href="../reference/grapes-plus-grapes.html">%+%</a></span></span>
<span>  <span class="op">(</span><span class="va">I</span> <span class="op"><a href="../reference/grapes-greater-than-grapes.html">%-&gt;%</a></span> <span class="va">recovery</span> <span class="op"><a href="../reference/grapes-greater-than-grapes.html">%-&gt;%</a></span> <span class="va">R</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sir_diagram</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/finalize.html">finalize</a></span><span class="op">(</span><span class="va">sir</span>, reset_ids <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sir_diagram</span><span class="op">)</span></span>
<span><span class="co">#&gt; StockFlowDiagram</span></span>
<span><span class="co">#&gt;   Stocks: 3 </span></span>
<span><span class="co">#&gt;   Flows: 2 </span></span>
<span><span class="co">#&gt;   Links: 4 </span></span>
<span><span class="co">#&gt;   Variables: 0 </span></span>
<span><span class="co">#&gt;   Sum variables: 0</span></span></code></pre></div>
<p>This creates the classic SIR epidemic model!</p>
</div>
<div class="section level2">
<h2 id="key-concepts-summary">Key Concepts Summary<a class="anchor" aria-label="anchor" href="#key-concepts-summary"></a>
</h2>
<div class="section level3">
<h3 id="stocks">Stocks<a class="anchor" aria-label="anchor" href="#stocks"></a>
</h3>
<ul>
<li>Represent accumulations (population, water in tank, money in
account)</li>
<li>Have initial values</li>
<li>Change over time according to flows</li>
</ul>
</div>
<div class="section level3">
<h3 id="flows">Flows<a class="anchor" aria-label="anchor" href="#flows"></a>
</h3>
<ul>
<li>Represent rates of change</li>
<li>Have <code>from</code> and <code>to</code> stocks (or NULL for
external sources/sinks)</li>
<li>Defined by rate functions that depend on:
<ul>
<li>Current stock values (<code>inputs$StockName</code>)</li>
<li>Parameters (<code>params$ParamName</code>)</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="parameters">Parameters<a class="anchor" aria-label="anchor" href="#parameters"></a>
</h3>
<ul>
<li>Constants that control model behavior</li>
<li>Passed to <code><a href="../reference/solve_diagram.html">solve_diagram()</a></code>
</li>
<li>Examples: birth rate, infection rate, decay constant</li>
</ul>
</div>
<div class="section level3">
<h3 id="rate-functions">Rate Functions<a class="anchor" aria-label="anchor" href="#rate-functions"></a>
</h3>
<p>Flow rate functions have the signature:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># inputs$X gives current value of stock X</span></span>
<span>  <span class="co"># params$k gives parameter k</span></span>
<span>  <span class="co"># return a single numeric value (the rate)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="whats-next">What’s Next?<a class="anchor" aria-label="anchor" href="#whats-next"></a>
</h2>
<ul>
<li>
<strong>Introduction vignette</strong>: More examples including SEIR
model with population conservation</li>
<li>
<strong>Composition</strong>: Learn to build complex models from
simpler components (future)</li>
<li>
<strong>Stratification</strong>: Add dimensions like age groups or
geographic regions (future)</li>
</ul>
</div>
<div class="section level2">
<h2 id="common-patterns">Common Patterns<a class="anchor" aria-label="anchor" href="#common-patterns"></a>
</h2>
<div class="section level3">
<h3 id="conservation">Conservation<a class="anchor" aria-label="anchor" href="#conservation"></a>
</h3>
<p>When modeling conserved quantities:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_sum_variable.html">add_sum_variable</a></span><span class="op">(</span><span class="st">"Total"</span>, stocks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Stock1"</span>, <span class="st">"Stock2"</span>, <span class="st">"Stock3"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The total will remain constant.</p>
</div>
<div class="section level3">
<h3 id="feedback-loops">Feedback Loops<a class="anchor" aria-label="anchor" href="#feedback-loops"></a>
</h3>
<p>Stocks can influence their own flows:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"Population"</span>, initial <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"growth"</span>,</span>
<span>    from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    to <span class="op">=</span> <span class="st">"Population"</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="co"># Population influences its own growth rate</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">r</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">Population</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="coupled-systems">Coupled Systems<a class="anchor" aria-label="anchor" href="#coupled-systems"></a>
</h3>
<p>Multiple stocks affecting each other:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"A"</span>, initial <span class="op">=</span> <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_stock.html">add_stock</a></span><span class="op">(</span><span class="st">"B"</span>, initial <span class="op">=</span> <span class="fl">50</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"A_to_B"</span>,</span>
<span>    from <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>    to <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">k1</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">A</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_flow.html">add_flow</a></span><span class="op">(</span><span class="st">"B_to_A"</span>,</span>
<span>    from <span class="op">=</span> <span class="st">"B"</span>,</span>
<span>    to <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>    rate <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">inputs</span>, <span class="va">params</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="va">params</span><span class="op">$</span><span class="va">k2</span> <span class="op">*</span> <span class="va">inputs</span><span class="op">$</span><span class="va">B</span></span>
<span>    <span class="op">}</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="tips">Tips<a class="anchor" aria-label="anchor" href="#tips"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Start simple</strong>: Build up complexity gradually</li>
<li>
<strong>Use meaningful names</strong>: Stock and flow names become
equation variable names</li>
<li>
<strong>Check units</strong>: Make sure rates have correct
dimensions</li>
<li>
<strong>Validate</strong>: Check that your model behaves as expected
for extreme parameter values</li>
<li>
<strong>Visualize first</strong>: Use <code>plot(diagram)</code> to
see structure before solving</li>
</ol>
</div>
<div class="section level2">
<h2 id="getting-help">Getting Help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">stock_flow_diagram</span>  <span class="co"># Help on diagram construction</span></span>
<span><span class="op">?</span><span class="va">solve_diagram</span>       <span class="co"># Help on solving</span></span>
<span><span class="op">?</span><span class="va">plot.StockFlowDiagram</span>  <span class="co"># Help on visualization</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="session-info">Session Info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.5.2 (2025-10-31)</span></span>
<span><span class="co">#&gt; Platform: x86_64-pc-linux-gnu</span></span>
<span><span class="co">#&gt; Running under: Ubuntu 24.04.3 LTS</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt; BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 </span></span>
<span><span class="co">#&gt; LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.26.so;  LAPACK version 3.12.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt;  [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8       </span></span>
<span><span class="co">#&gt;  [4] LC_COLLATE=C.UTF-8     LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8   </span></span>
<span><span class="co">#&gt;  [7] LC_PAPER=C.UTF-8       LC_NAME=C              LC_ADDRESS=C          </span></span>
<span><span class="co">#&gt; [10] LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: UTC</span></span>
<span><span class="co">#&gt; tzcode source: system (glibc)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] magrittr_2.0.4</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] crayon_1.5.3       vctrs_0.6.5        cli_3.6.5          knitr_1.51        </span></span>
<span><span class="co">#&gt;  [5] rlang_1.1.6        xfun_0.55          generics_0.1.4     S7_0.2.1          </span></span>
<span><span class="co">#&gt;  [9] textshaping_1.0.4  jsonlite_2.0.0     deSolve_1.40       labeling_0.4.3    </span></span>
<span><span class="co">#&gt; [13] glue_1.8.0         htmltools_0.5.9    ragg_1.5.0         sass_0.4.10       </span></span>
<span><span class="co">#&gt; [17] scales_1.4.0       rmarkdown_2.30     grid_4.5.2         tibble_3.3.0      </span></span>
<span><span class="co">#&gt; [21] evaluate_1.0.5     jquerylib_0.1.4    fastmap_1.2.0      yaml_2.3.12       </span></span>
<span><span class="co">#&gt; [25] lifecycle_1.0.4    compiler_4.5.2     dplyr_1.1.4        RColorBrewer_1.1-3</span></span>
<span><span class="co">#&gt; [29] fs_1.6.6           pkgconfig_2.0.3    farver_2.1.2       systemfonts_1.3.1 </span></span>
<span><span class="co">#&gt; [33] digest_0.6.39      R6_2.6.1           tidyselect_1.2.1   pillar_1.11.1     </span></span>
<span><span class="co">#&gt; [37] bslib_0.9.0        withr_3.0.2        tools_4.5.2        gtable_0.3.6      </span></span>
<span><span class="co">#&gt; [41] pkgdown_2.2.0      ggplot2_4.0.1      cachem_1.1.0       desc_1.4.3</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ian Moran.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
