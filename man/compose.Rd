% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/composition.R
\name{compose}
\alias{compose}
\title{Compose two stock-flow diagrams}
\usage{
compose(left, right, interface = NULL)
}
\arguments{
\item{left}{OpenStockFlowDiagram, StockFlowDiagram, or decorated cospan}

\item{right}{OpenStockFlowDiagram, StockFlowDiagram, or decorated cospan}

\item{interface}{Character vector of stock names to use as interface
(optional if diagrams already have interfaces set)}
}
\value{
OpenStockFlowDiagram with composition result
}
\description{
Composes two open stock-flow diagrams via categorical pushout.
The diagrams are glued along their shared interface, and flows connecting
to interface stocks are merged by summing their rates.
}
\details{
Composition follows the categorical pushout construction:
- The disjoint union of both diagrams is taken
- Stocks in the interface are identified (treated as the same stock)
- Flows connecting to interface stocks are preserved
- If multiple flows connect the same pair of stocks, their rates are summed

The composition is associative: (A ∘ B) ∘ C = A ∘ (B ∘ C)
}
\examples{
\dontrun{
# Create two models
transmission <- stock_flow_diagram() \%>\%
  add_stock("S", initial = 999) \%>\%
  add_stock("I", initial = 1) \%>\%
  add_flow("infection", from = "S", to = "I", rate = ...)

recovery <- stock_flow_diagram() \%>\%
  add_stock("I", initial = 1) \%>\%
  add_stock("R", initial = 0) \%>\%
  add_flow("recovery", from = "I", to = "R", rate = ...)

# Compose via shared stock I
sir <- compose(transmission, recovery, interface = "I")
}

}
